-- Create a rule that matches multiple domain patterns with wildcards
local StanDomains = OrRule({
  QNameSuffixRule("stan.com.au"),
  QNameSuffixRule("infinity-c32.youboranqs01.com"),
  QNameSuffixRule("streamcoimg-a.akamaihd.net"),
  QNameSuffixRule("awslive.stan.video"),
})

-- Define your Stan-specific resolver pool
newServer({address="170.205.36.86:53", name="StanResolver", pool="Stan"})

-- Set load balancing policy for the Stan pool
setPoolServerPolicy(roundrobin, "Stan")

-- Route Stan domains queries to the Stan pool
addAction(StanDomains, PoolAction("Stan"))

-- Default: route everything else to the upstream pool
addAction(AllRule(), PoolAction("upstream"))
